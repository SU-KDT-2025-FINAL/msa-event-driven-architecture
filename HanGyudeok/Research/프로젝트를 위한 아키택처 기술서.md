# ðŸŒ MSA ê¸°ë°˜ ì•„í‚¤í…ì²˜ ê¸°ìˆ ì„œ (Spring Boot + React + GitHub Actions + Argo CD)

## 1. ê°œìš”

ì´ ë¬¸ì„œëŠ” Spring Bootì™€ Reactë¥¼ í™œìš©í•˜ì—¬ MSA(Microservice Architecture) ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê³ , CI/CD íŒŒì´í”„ë¼ì¸ì„ í†µí•´ ìžë™í™”ëœ ë°°í¬ë¥¼ ì§„í–‰í•˜ëŠ” ê°œë°œ í™˜ê²½ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## 2. ì•„í‚¤í…ì²˜ êµ¬ì„± ê°œìš”

```
[ì‚¬ìš©ìž] â†’ [React + Vite í”„ë¡ íŠ¸ì—”ë“œ] â†’ [Spring Cloud Gateway] â†’ [ê° MSA ì„œë¹„ìŠ¤ (Spring Boot)]
                                                      â†“
                                        [Swagger (API ë¬¸ì„œ)]
                                                      â†“
                                      [OAuth2 / JWT ì¸ì¦]

CI: GitHub Actions (ì½”ë“œ ë³€ê²½ ì‹œ ìžë™ í…ŒìŠ¤íŠ¸ ë° ë¹Œë“œ)
CD: Argo CD (Git ê¸°ë°˜ì˜ ìžë™ ë°°í¬)

ì½”ë“œ ê´€ë¦¬: GitHub
í”„ë¡œì íŠ¸ ê´€ë¦¬: Notion, Jira
ë°°í¬ í™˜ê²½: Docker, Kubernetes
```

---

## 3. ì£¼ìš” ë„êµ¬ ë° ê°œë…

### ðŸ“¦ ë°±ì—”ë“œ

* **Spring Boot**: REST API ì„œë²„ ê°œë°œ
* **Spring Security + OAuth2 + JWT**: ì¸ì¦/ì¸ê°€
* **Spring Cloud Gateway**: API ê²Œì´íŠ¸ì›¨ì´ë¡œ ìš”ì²­ ë¼ìš°íŒ… ë° í•„í„°ë§
* **Springdoc OpenAPI(Swagger)**: API ìžë™ ë¬¸ì„œí™”

### ðŸ’» í”„ë¡ íŠ¸ì—”ë“œ

* **React + Vite**: í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„

### âš™ï¸ CI/CD

* **GitHub Actions**: ì½”ë“œ í‘¸ì‹œ ì‹œ ìžë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸/ë¹Œë“œ ìˆ˜í–‰
* **Argo CD**: Gitì— ìžˆëŠ” Kubernetes ë§¤ë‹ˆíŽ˜ìŠ¤íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìžë™ ë°°í¬

### â˜ï¸ ë°°í¬/ì¸í”„ë¼

* **Docker**: ì‹¤í–‰ í™˜ê²½ í†µì¼
* **Kubernetes**: ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
* **kubectl**: Kubernetes í´ëŸ¬ìŠ¤í„° ì œì–´ CLI

---

## 4. ê°œë°œ íë¦„

1. ê°œë°œìžëŠ” ë°±ì—”ë“œ(Spring Boot) ë˜ëŠ” í”„ë¡ íŠ¸ì—”ë“œ(React) ì½”ë“œë¥¼ ìž‘ì„±í•¨
2. ë¡œì»¬ì—ì„œ Docker í™˜ê²½ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•¨ (`Dockerfile`ë¡œ ë¹Œë“œ í›„ ì‹¤í–‰)
3. ì •ìƒ ìž‘ë™ ì‹œ GitHubì— ì½”ë“œ í‘¸ì‹œ
4. GitHub Actionsê°€ ìžë™ìœ¼ë¡œ ë¹Œë“œ/í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰
5. ì„±ê³µ ì‹œ Docker ì´ë¯¸ì§€ ìƒì„± ë° DockerHub ë“± ì´ë¯¸ì§€ ì €ìž¥ì†Œë¡œ í‘¸ì‹œ
6. Kubernetes ë§¤ë‹ˆíŽ˜ìŠ¤íŠ¸ê°€ ìžˆëŠ” Git ë ˆí¬ì§€í† ë¦¬ì— ì—…ë°ì´íŠ¸
7. Argo CDê°€ ì´ë¥¼ ê°ì§€í•˜ì—¬ ìžë™ ë°°í¬ ìˆ˜í–‰
8. ì‹¤ì œ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‚¬ìš©ìž ìš”ì²­ì„ ì²˜ë¦¬í•¨

---

## 5. í•µì‹¬ ì„¤ì • ì˜ˆì‹œ

### âœ… GitHub Actions ì„¤ì • (`.github/workflows/backend.yml`)

```yaml
name: CI for Spring Boot

on:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Set up JDK
      uses: actions/setup-java@v3
      with:
        java-version: '17'
    - name: Build with Gradle
      run: ./gradlew build
```

### âœ… Argo CD ë°°í¬ ì˜ˆì‹œ (Kubernetes ë§¤ë‹ˆíŽ˜ìŠ¤íŠ¸)

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: backend-service
spec:
  replicas: 1
  selector:
    matchLabels:
      app: backend
  template:
    metadata:
      labels:
        app: backend
    spec:
      containers:
      - name: backend
        image: your-dockerhub-id/backend:latest
        ports:
        - containerPort: 8080
```

### âœ… Dockerfile ì˜ˆì‹œ (Spring Boot)

```dockerfile
FROM openjdk:17-alpine
ARG JAR_FILE=build/libs/*.jar
COPY ${JAR_FILE} app.jar
ENTRYPOINT ["java","-jar","/app.jar"]
```

---

## 6. ê¶Œìž¥ ë„êµ¬ (ì„ íƒ ì‚¬í•­)

| ë„êµ¬         | ëª©ì      | ì„¤ëª…                    |
| ---------- | ------ | --------------------- |
| Prometheus | ëª¨ë‹ˆí„°ë§   | ì•± ìƒíƒœë¥¼ ì‹œê°í™”í•  ìˆ˜ ìžˆìŒ       |
| Grafana    | ì‹œê°í™”    | ëª¨ë‹ˆí„°ë§ ì§€í‘œ ë³´ê¸°            |
| Sentry     | ì—ëŸ¬ ì¶”ì   | ì‹¤ì‹œê°„ ì—ëŸ¬ í™•ì¸             |
| Helm       | íŒ¨í‚¤ì§€ ê´€ë¦¬ | Kubernetes ì•± ë°°í¬ë¥¼ ë” ì‰½ê²Œ |

---

## 7. ë³´ì•ˆ ì£¼ì˜ì‚¬í•­

* `.env` ë˜ëŠ” `application.yml` ë“± í™˜ê²½ë³€ìˆ˜ëŠ” Docker í™˜ê²½ì—ë„ ì „ë‹¬ë˜ë„ë¡ ì²˜ë¦¬
* í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ê°€ ì—†ìœ¼ë©´ ì»¨í…Œì´ë„ˆê°€ ì •ìƒ ìž‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìžˆìŒ
* `Kubernetes Secret`ì„ ì‚¬ìš©í•´ ë¯¼ê° ì •ë³´ë¥¼ ê´€ë¦¬í•  ê²ƒ

---

## 8. ê²°ë¡ 

* ì´ êµ¬ì¡°ëŠ” ìž‘ì€ íŒ€ë¶€í„° ëŒ€ê·œëª¨ ì‹œìŠ¤í…œê¹Œì§€ í™•ìž¥ ê°€ëŠ¥í•œ êµ¬ì¡°ìž…ë‹ˆë‹¤.
* ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ìœ ì§€ë³´ìˆ˜í•˜ê³  ë°°í¬í•  ìˆ˜ ìžˆê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.
* CI/CDì™€ ì»¨í…Œì´ë„ˆ í™˜ê²½ì´ ê²°í•©ë˜ì–´ ë°˜ë³µ ìž‘ì—… ì—†ì´ ë¹ ë¥´ê³  ì•ˆì •ì ì¸ ë°°í¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

![img_1.png](img_1.png)

![img.png](img.png)

* ì´ë¯¸ì§€ì— ì¡´ìž¬í•˜ëŠ” hptt -> http