# MSA와 이벤트 드리븐 아키텍처 기본 개념

## 마이크로서비스 아키텍처(MSA) 기본 개념

### 마이크로서비스란?
- 하나의 큰 애플리케이션을 여러 개의 작고 독립적인 서비스로 분해하는 아키텍처 패턴
- 각 서비스는 특정 비즈니스 기능을 담당하고, 독립적으로 개발, 배포, 확장 가능
- 서비스 간 통신은 잘 정의된 API(주로 HTTP/REST, gRPC)를 통해 이루어짐

### 기존 모놀리식과의 차이점
- **모놀리식**: 모든 기능이 하나의 배포 단위에 포함
- **마이크로서비스**: 기능별로 분리된 독립적인 배포 단위들

### MSA의 핵심 특징
- 비즈니스 역량 중심의 조직화
- 분산화된 거버넌스와 데이터 관리
- 장애 격리(Failure Isolation)
- 진화 가능한 설계

## 이벤트 드리븐 아키텍처(EDA) 기본 개념

### 이벤트 드리븐 아키텍처란?
- 이벤트의 생산, 감지, 소비, 반응을 중심으로 설계된 소프트웨어 아키텍처 패턴
- 시스템 컴포넌트들이 이벤트를 통해 비동기적으로 통신
- 느슨한 결합(Loose Coupling)과 높은 확장성을 제공

### 핵심 구성 요소
- **이벤트**: 시스템에서 발생한 상태 변화나 중요한 사건
- **이벤트 프로듀서**: 이벤트를 생성하고 발행하는 컴포넌트
- **이벤트 컨슈머**: 이벤트를 수신하고 처리하는 컴포넌트
- **이벤트 브로커**: 이벤트 라우팅과 전달을 담당하는 미들웨어

## 이벤트의 종류와 특성

### 도메인 이벤트
- 비즈니스 도메인에서 발생하는 의미 있는 사건
- 예시: "주문이 생성됨", "결제가 완료됨", "상품 재고가 부족함"

### 시스템 이벤트
- 기술적 또는 인프라 레벨에서 발생하는 이벤트
- 예시: "서버가 시작됨", "데이터베이스 연결 실패"

### 이벤트의 특징
- **불변성**: 한번 발생한 이벤트는 변경되지 않음
- **과거형 표현**: 이미 일어난 사실을 나타냄
- **컨텍스트 정보 포함**: 이벤트 발생 시점의 관련 데이터를 포함

## 동기 vs 비동기 통신

### 동기 통신 (Synchronous)
- 요청을 보내고 응답을 기다림
- 예시: HTTP/REST API 호출
- 즉시 응답이 필요한 경우에 적합

### 비동기 통신 (Asynchronous)
- 요청을 보내고 응답을 기다리지 않음
- 메시지 큐, 이벤트 스트림을 통한 통신
- 시스템 간 결합도를 낮추고 확장성을 높임

## 왜 MSA + EDA인가?

### MSA의 한계점
- 서비스 간 동기 호출로 인한 강한 결합
- 분산 트랜잭션 처리의 복잡성
- 연쇄 장애(Cascading Failure) 위험

### EDA가 MSA에 제공하는 이점
- 서비스 간 느슨한 결합 실현
- 비동기 처리를 통한 성능 향상
- 이벤트 기반 분산 트랜잭션 처리
- 시스템 복원력(Resilience) 향상

## 간단한 예시: 전자상거래 시스템

```
1. 주문 서비스가 "주문 생성됨" 이벤트 발행
   ↓
2. 재고 서비스가 해당 이벤트를 수신하여 재고 차감
   ↓
3. 결제 서비스가 이벤트를 수신하여 결제 처리 시작
   ↓
4. 알림 서비스가 이벤트를 수신하여 고객에게 알림 발송
```

**핵심**: 각 서비스는 서로를 직접 호출하지 않고, 이벤트를 통해 협력합니다.

## 다음 단계

이런 기본 개념들을 바탕으로 다음과 같은 주제들을 더 깊이 탐구할 수 있습니다:

- 이벤트 소싱(Event Sourcing) 패턴
- CQRS(Command Query Responsibility Segregation)
- Saga 패턴을 통한 분산 트랜잭션
- 메시지 브로커 선택과 비교
- 이벤트 스키마 설계와 진화
- 모니터링과 관찰 가능성